<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->


<html lang="en">
<head>
  <meta charset="utf-8">
  <title>parseXML demo</title>
  
  <script src="../build/tiledstreaming4dash.min.js"></script>
  <script src="../src/dash/utils/CrossOriginRequest.js"></script>
  <script src="../src/dash/utils/XML2JSON.js"></script>
  
  <script>
      
  // var ServiceBus = require("./utils/ServiceBus.js");
  // var MPDRetriever = require("./DashMPDRetriever.js").MPDRetriever;
  // var MPDParser = require("./DashMPDParser.js").MPDParser;
  
  var url = 'http://localhost:8000/Documents/output.mpd';
  

  
  window.onload = crossOriginRequest(url, function(err, data) {

      if (err) {

    return console.err(err);
    }
    

    var parser = new DOMParser();
    var docXML = parser.parseFromString(data, 'text/xml');
    var testJSON = xml2JSON(docXML);

    console.log(JSON.stringify(testJSON, null, 2));
    // console.log(docXML);
  });   
 
    
  function openVideo (){
      var mpdURL = document.getElementById('MPD_URL').value;
     
      // var serviceBus = new ServiceBus;
      
      // serviceBus.subscribe('Test', 'test', 'test')
           
      var mpdParser = new MPDParser;
      var mpdRetriever = new MPDRetriever({mpdURL: mpdURL});
      mpdRetriever.getMPD();    
  } 
      
  </script>
</head>

<body>       
<div>
</div>

<input type="text" id="MPD_URL" style="width: 400px;">
<input type="submit" name="Open video" id="mpdButton" onclick="openVideo()" value="Open video" />
 
</body>
</html>